Version 4
SHEET 1 2136 820
WIRE 288 -576 -432 -576
WIRE 720 -576 288 -576
WIRE -432 -544 -432 -576
WIRE -432 -432 -432 -464
WIRE 496 -432 -432 -432
WIRE 528 -432 496 -432
WIRE 640 -432 608 -432
WIRE 1120 -432 640 -432
WIRE 1200 -432 1120 -432
WIRE 1408 -432 1296 -432
WIRE 1504 -432 1408 -432
WIRE 1808 -432 1760 -432
WIRE 1888 -432 1808 -432
WIRE 1952 -432 1888 -432
WIRE 2064 -432 1952 -432
WIRE 1952 -416 1952 -432
WIRE 2064 -416 2064 -432
WIRE 496 -400 496 -432
WIRE 1120 -400 1120 -432
WIRE 1408 -400 1408 -432
WIRE 1808 -384 1808 -432
WIRE -432 -336 -432 -432
WIRE 1952 -320 1952 -352
WIRE 2064 -320 2064 -336
WIRE 1408 -304 1408 -336
WIRE 288 -288 288 -576
WIRE 1120 -288 1120 -320
WIRE 1216 -288 1216 -384
WIRE 1216 -288 1120 -288
WIRE 256 -272 160 -272
WIRE 352 -256 320 -256
WIRE 384 -256 352 -256
WIRE 1632 -256 1632 -336
WIRE 1632 -256 448 -256
WIRE 1808 -256 1808 -304
WIRE 1808 -256 1632 -256
WIRE -432 -240 -432 -256
WIRE -432 -240 -560 -240
WIRE -128 -240 -272 -240
WIRE -64 -240 -128 -240
WIRE 48 -240 16 -240
WIRE 256 -240 48 -240
WIRE -272 -224 -272 -240
WIRE -560 -208 -560 -240
WIRE 48 -208 48 -240
WIRE -432 -192 -432 -240
WIRE 1120 -176 1120 -288
WIRE 160 -160 160 -272
WIRE 192 -160 160 -160
WIRE 352 -160 352 -256
WIRE 352 -160 256 -160
WIRE 720 -144 720 -576
WIRE 496 -128 496 -320
WIRE 688 -128 496 -128
WIRE -272 -112 -272 -144
WIRE 800 -112 752 -112
WIRE 48 -96 48 -128
WIRE 640 -96 640 -432
WIRE 688 -96 640 -96
WIRE -432 -48 -432 -112
WIRE 288 -48 288 -224
WIRE 288 -48 -432 -48
WIRE 720 -48 720 -80
WIRE 720 -48 288 -48
WIRE 1120 -16 1120 -96
WIRE 160 0 160 -160
WIRE -128 16 -128 -240
WIRE -128 16 -336 16
WIRE 800 16 800 -112
WIRE 800 16 400 16
WIRE 496 48 496 -128
WIRE 400 64 400 16
WIRE 448 64 400 64
WIRE 1072 64 976 64
WIRE -336 80 -336 16
WIRE -128 96 -128 16
WIRE 976 96 976 64
WIRE -176 112 -224 112
WIRE 1120 112 1120 80
WIRE 496 160 496 144
WIRE 672 160 496 160
WIRE 768 160 672 160
WIRE -336 192 -336 160
WIRE -224 192 -224 112
WIRE -224 192 -336 192
WIRE 496 192 496 160
WIRE 976 208 976 176
WIRE -128 304 -128 192
WIRE 160 304 160 80
WIRE 160 304 -128 304
WIRE 496 304 496 272
WIRE -128 336 -128 304
WIRE -176 416 -272 416
WIRE -272 448 -272 416
WIRE -128 464 -128 432
WIRE -272 560 -272 528
FLAG -560 -208 0
FLAG 1888 -432 Vout
FLAG -272 -112 0
FLAG 48 -96 0
FLAG 496 304 0
FLAG 672 160 Isense
FLAG 1952 -320 0
FLAG -128 464 0
FLAG -272 560 0
FLAG 2064 -320 0
FLAG 1408 -304 0
FLAG 1120 112 0
FLAG 976 208 0
SYMBOL PowerProducts\\LT317A 1632 -432 R0
SYMATTR InstName U1
SYMBOL voltage -432 -352 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 12V
SYMBOL res 1792 -400 R0
SYMATTR InstName R1
SYMATTR Value 220R
SYMBOL Opamps\\opamp2 288 -320 R0
WINDOW 3 16 96 Invisible 2
WINDOW 38 8 10 Left 2
WINDOW 0 6 -19 Left 2
SYMATTR Value ""
SYMATTR SpiceModel LM2904
SYMATTR InstName U2
SYMBOL voltage -272 -240 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value 3.3V
SYMBOL res 624 -448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 0.1R
SYMBOL Opamps\\opamp2 720 -176 R0
WINDOW 3 16 96 Invisible 2
WINDOW 38 8 10 Left 2
WINDOW 0 6 -19 Left 2
SYMATTR Value ""
SYMATTR SpiceModel LM2904
SYMATTR InstName U4
SYMBOL res 480 -416 R0
SYMATTR InstName R3
SYMATTR Value 2K2
SYMBOL res 480 176 R0
SYMATTR InstName R4
SYMATTR Value 11K
SYMBOL pmos 448 144 M180
SYMATTR InstName M1
SYMATTR Value BSS84
SYMBOL res 32 -256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10K
SYMBOL res 32 -224 R0
SYMATTR InstName R6
SYMATTR Value 10K
SYMBOL cap 256 -176 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 0.1µF
SYMBOL pmos -176 192 M180
SYMATTR InstName M2
SYMATTR Value BSS84
SYMBOL nmos -176 336 R0
SYMATTR InstName M3
SYMATTR Value 2N7002
SYMBOL voltage -336 64 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -293 158 Left 2
SYMATTR Value PULSE(0 3.3V 100us 40ns 40ns 10ms 100ms)
SYMATTR InstName V3
SYMBOL voltage -272 432 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -330 167 Left 2
SYMATTR Value PULSE(0 3.3V 50ms 40ns 40ns 10ms 100ms)
SYMATTR InstName V4
SYMBOL res 144 -16 R0
SYMATTR InstName R7
SYMATTR Value 10K
SYMBOL res 2048 -432 R0
SYMATTR InstName R8
SYMATTR Value 1K
SYMBOL voltage -432 -208 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V5
SYMATTR Value 2.5V
SYMBOL voltage -432 -560 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value 2V
SYMBOL polcap 1392 -400 R0
WINDOW 3 24 56 Left 2
SYMATTR InstName C1
SYMATTR Value 100µ
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=25 Irms=145m Rser=0.62 Lser=0 mfg="Nichicon" pn="UPR1E101MPH" type="Al electrolytic"
SYMBOL pmos 1296 -384 M270
SYMATTR InstName M4
SYMATTR Value FDC5614P
SYMBOL res 1104 -416 R0
SYMATTR InstName R9
SYMATTR Value 10K
SYMBOL res 1104 -192 R0
SYMATTR InstName R10
SYMATTR Value 10K
SYMBOL nmos 1072 -16 R0
SYMATTR InstName M5
SYMATTR Value 2N7002
SYMBOL voltage 976 80 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -330 167 Left 2
SYMATTR Value PULSE(0 3.3V 15ms 40ns 40ns 1000ms)
SYMATTR InstName V7
SYMBOL polcap 1936 -416 R0
WINDOW 3 24 56 Left 2
SYMATTR InstName C2
SYMATTR Value 100µ
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=25 Irms=145m Rser=0.62 Lser=0 mfg="Nichicon" pn="UPR1E101MPH" type="Al electrolytic"
SYMBOL schottky 448 -272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMATTR Value MBRS140
SYMATTR Description Diode
SYMATTR Type diode
TEXT 1536 -152 Left 2 !.include "lm2904.lib"
TEXT 1536 -112 Left 2 !.tran 250ms startup uic
