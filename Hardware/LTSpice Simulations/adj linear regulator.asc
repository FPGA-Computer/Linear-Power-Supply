Version 4
SHEET 1 1656 820
WIRE 480 -576 -240 -576
WIRE 912 -576 480 -576
WIRE -240 -544 -240 -576
WIRE -240 -432 -240 -464
WIRE 688 -432 -240 -432
WIRE 720 -432 688 -432
WIRE 832 -432 800 -432
WIRE 1024 -432 832 -432
WIRE 1328 -432 1280 -432
WIRE 1408 -432 1328 -432
WIRE 1472 -432 1408 -432
WIRE 1584 -432 1472 -432
WIRE 1472 -416 1472 -432
WIRE 1584 -416 1584 -432
WIRE 688 -400 688 -432
WIRE 1328 -384 1328 -432
WIRE -240 -336 -240 -432
WIRE 1472 -320 1472 -352
WIRE 1584 -320 1584 -336
WIRE 480 -288 480 -576
WIRE 448 -272 352 -272
WIRE 544 -256 512 -256
WIRE 1152 -256 1152 -336
WIRE 1152 -256 544 -256
WIRE 1328 -256 1328 -304
WIRE 1328 -256 1152 -256
WIRE -240 -240 -240 -256
WIRE -240 -240 -368 -240
WIRE 64 -240 -80 -240
WIRE 128 -240 64 -240
WIRE 240 -240 208 -240
WIRE 448 -240 240 -240
WIRE -80 -224 -80 -240
WIRE -368 -208 -368 -240
WIRE 240 -208 240 -240
WIRE -240 -192 -240 -240
WIRE 352 -160 352 -272
WIRE 384 -160 352 -160
WIRE 544 -160 544 -256
WIRE 544 -160 448 -160
WIRE 912 -144 912 -576
WIRE 688 -128 688 -320
WIRE 880 -128 688 -128
WIRE -80 -112 -80 -144
WIRE 992 -112 944 -112
WIRE 240 -96 240 -128
WIRE 832 -96 832 -432
WIRE 880 -96 832 -96
WIRE -240 -48 -240 -112
WIRE 480 -48 480 -224
WIRE 480 -48 -240 -48
WIRE 912 -48 912 -80
WIRE 912 -48 480 -48
WIRE 352 0 352 -160
WIRE 64 16 64 -240
WIRE 64 16 -144 16
WIRE 992 16 992 -112
WIRE 992 16 592 16
WIRE 688 48 688 -128
WIRE 592 64 592 16
WIRE 640 64 592 64
WIRE -144 80 -144 16
WIRE 64 96 64 16
WIRE 16 112 -32 112
WIRE 688 160 688 144
WIRE 864 160 688 160
WIRE 960 160 864 160
WIRE -144 192 -144 160
WIRE -32 192 -32 112
WIRE -32 192 -144 192
WIRE 688 192 688 160
WIRE 64 304 64 192
WIRE 352 304 352 80
WIRE 352 304 64 304
WIRE 688 304 688 272
WIRE 64 336 64 304
WIRE 16 416 -80 416
WIRE -80 448 -80 416
WIRE 64 464 64 432
WIRE -80 560 -80 528
FLAG -368 -208 0
FLAG 1408 -432 Vout
FLAG -80 -112 0
FLAG 240 -96 0
FLAG 688 304 0
FLAG 864 160 Isense
FLAG 1472 -320 0
FLAG 64 464 0
FLAG -80 560 0
FLAG 1584 -320 0
SYMBOL PowerProducts\\LT317A 1152 -432 R0
SYMATTR InstName U1
SYMBOL voltage -240 -352 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 12V
SYMBOL res 1312 -400 R0
SYMATTR InstName R1
SYMATTR Value 220R
SYMBOL Opamps\\opamp2 480 -320 R0
WINDOW 3 16 96 Invisible 2
WINDOW 38 8 10 Left 2
WINDOW 0 6 -19 Left 2
SYMATTR Value ""
SYMATTR SpiceModel LM2904
SYMATTR InstName U2
SYMBOL voltage -80 -240 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value 3.3V
SYMBOL res 816 -448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 0.1R
SYMBOL Opamps\\opamp2 912 -176 R0
WINDOW 3 16 96 Invisible 2
WINDOW 38 8 10 Left 2
WINDOW 0 6 -19 Left 2
SYMATTR Value ""
SYMATTR SpiceModel LM2904
SYMATTR InstName U4
SYMBOL res 672 -416 R0
SYMATTR InstName R3
SYMATTR Value 1K
SYMBOL res 672 176 R0
SYMATTR InstName R4
SYMATTR Value 20K
SYMBOL pmos 640 144 M180
SYMATTR InstName M1
SYMATTR Value BSS84
SYMBOL res 224 -256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10K
SYMBOL res 224 -224 R0
SYMATTR InstName R6
SYMATTR Value 10K
SYMBOL cap 448 -176 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 0.1µF
SYMBOL polcap 1456 -416 R0
WINDOW 3 24 56 Left 2
SYMATTR Value 10µ
SYMATTR InstName C6
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=16 Irms=35m Rser=2.8 Lser=0 mfg="Nichicon" pn="UPR1C100MAH" type="Al electrolytic"
SYMBOL pmos 16 192 M180
SYMATTR InstName M2
SYMATTR Value BSS84
SYMBOL nmos 16 336 R0
SYMATTR InstName M3
SYMATTR Value 2N7002
SYMBOL voltage -144 64 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -293 158 Left 2
SYMATTR Value PULSE(0 3.3V 100us 40ns 40ns 10ms 100ms)
SYMATTR InstName V3
SYMBOL voltage -80 432 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -330 167 Left 2
SYMATTR Value PULSE(0 3.3V 50ms 40ns 40ns 10ms 100ms)
SYMATTR InstName V4
SYMBOL res 336 -16 R0
SYMATTR InstName R7
SYMATTR Value 10K
SYMBOL res 1568 -432 R0
SYMATTR InstName R8
SYMATTR Value 10R
SYMBOL voltage -240 -208 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V5
SYMATTR Value 2.5V
SYMBOL voltage -240 -560 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value 2V
TEXT 1152 536 Left 2 !.include "lm2904.lib"
TEXT 1152 576 Left 2 !.tran 250ms startup uic
